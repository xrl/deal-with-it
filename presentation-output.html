<!--
Google IO 2012 HTML5 Slide Template

Authors: Eric Bidelman <ebidel@gmail.com>
         Luke Mahe <lukem@google.com>

URL: https://code.google.com/p/io-2012-slides
-->
<!DOCTYPE html>
<html>
<head>
  <title>Google IO 2012</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">-->
  <!--<meta name="viewport" content="width=device-width, initial-scale=1.0">-->
  <!--This one seems to work all the time, but really small on ipad-->
  <!--<meta name="viewport" content="initial-scale=0.4">-->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="stylesheet" media="all" href="theme/css/default.css">
  <link rel="stylesheet" media="all" href="theme/css/app.css">
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="theme/css/phone.css">
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="js/slides" src="js/require-1.0.8.min.js"></script>
</head>
<body style="opacity: 0">

<slides class="layout-widescreen">

<!-- <slide class="logoslide nobackground">
  <article class="flexbox vcenter">
    <span><img src="images/google_developers_logo.png"></span>
  </article>
</slide>
 -->
<slide class="title-slide segue nobackground">
  <aside class="gdbar"><img src="images/html5_canvas_logo_by_netgoblin154-d54alet.png"></aside>
  <!-- The content of this hgroup is replaced programmatically through the slide_config.json. -->
  <hgroup class="auto-fadein">
    <h1 data-config-title><!-- populated from slide_config.json --></h1>
    <h2 data-config-subtitle><!-- populated from slide_config.json --></h2>
    <p data-config-presenter><!-- populated from slide_config.json --></p>
  </hgroup>
</slide>


<slide class="big" >
  
    <hgroup>
      <h2>Deal With It</h2>
      <h3></h3>
    </hgroup>
    <article ><h1>Memeing your screen since 2005</h1>

<p style="text-align: center">
  <img src="/images/dwi/Deal_with_it_dog_gif.gif"/>
</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Elements of a 'Deal With It'</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Conflict and/or Attitude</li>
<li>Sunglasses</li>
<li>"Deal With It"</li>
</ul></article>
 
</slide>

<slide class="big" >
  
    <hgroup>
      <h2><em>Technical</em> Elements of a 'Deal With It'</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Static or animated base image</li>
<li>Static or animated sunglasses</li>
<li>Static or animated text</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Exhibit A</h2>
      <h3>Something with tines</h3>
    </hgroup>
    <article ><p style="text-align: center">
  <img src="/images/dwi/cactus.gif"/>
</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Exhibit B</h2>
      <h3>Spoiler Alert</h3>
    </hgroup>
    <article ><p style="text-align: center">
  <img src="/images/dwi/data-vs-borg.gif" width="80%" style="margin: auto"/>
</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Exhibit C</h2>
      <h3>Spoiler Alert (II)</h3>
    </hgroup>
    <article ><p style="text-align: center">
  <img src="/images/dwi/godzilla.gif" width="80%" style="margin: auto"/>
</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Exhibit D</h2>
      <h3>Internet is for Cats</h3>
    </hgroup>
    <article ><p style="text-align: center">
  <img src="/images/dwi/cat-skateboard.gif" width="80%" style="margin: auto"/>
</p></article>
 
</slide>

<slide class="big" >
  
    <hgroup>
      <h2>Graphics Interchange Format</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>256 colors per frame</li>
<li>Animation</li>
<li>Pronunciation: "Choosy developers choose GIF"</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>JPEG</h2>
      <h3>Just an FYI</h3>
    </hgroup>
    <article ><ul>
<li>No animations</li>
<li>Way more complex</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>What We're Doing Today</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Drawing</li>
<li>Animating</li>
<li>Exporting</li>
</ul></article>
 
</slide>

<slide class="big" >
  
    <hgroup>
      <h2>Drawing</h2>
      <h3></h3>
    </hgroup>
    <article ><div style="width: 100%">
  <div class="pillar black gray-bg">
    <h1>Canvas</h1>
    <ul>
      <li>Pixels at (X,Y) or (X,Y,Z)</li>
      <li>Poor Text Rendering</li>
      <li>No animation support</li>
      <li>GIF exporting libraries support it</li>
    </ul>
  </div>
  <div class="pillar black green-bg">
    <h1>SVG</h1>
    <ul>
      <li>Scaleable</li>
      <li>Good text support</li>
      <li>Animations</li>
      <li>DOM elements</li>
      <li>Slows down with DOM complexity</li>
      <li>Did not find GIF exporting library support</li>
    </ul>
  </div>
</div></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>And the winner is...</h2>
      <h3></h3>
    </hgroup>
    <article ><p><span class="blue" style="font-size: 60pt">Canvas!<span></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Canvas Demo</h2>
      <h3></h3>
    </hgroup>
    <article ><p><a class="jsbin-embed" href="http://jsbin.com/iwovaj/74/embed?js,output">Ember Starter Kit</a><script src="http://static.jsbin.com/js/embed.js"></script></p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>How does canvas animation work?</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Render the whole canvas</li>
<li>Wait</li>
<li>GOTO 1</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>So... how are we building an app?</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Manage (X,Y) of the animation path</li>
<li>Animate sunglasses</li>
<li>Add base image</li>
<li>Render text</li>
<li>Let the web browser handle frame swapping</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Manage (X,Y) of the animation path</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Track mouse location in DOM element</li>
<li>Keep track of locations over time</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Manage (X,Y) (code I)</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
  steps: [],
  isMouseDown: false,
  mouseDown: function(){
    this.set('isMouseDown',true);
  },
  mouseUp: function(){
    this.set('isMouseDown',false);
  },
  mouseMove: function(event,view){
    if(this.get('isMouseDown')){
      var point = this.relMouseCoords(event,this.get('canvas'));
      // point = {x: XX, y: YY}
      this.get('steps').pushObject(point);
      this.drawLine();
    }
  }
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Manage (X,Y) (code II)</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
  // http://jsbin.com/ApuJOSA/1/edit
  relMouseCoords: function(e) {
    var el=e.target, c=el;
    var scaleX = c.width/c.offsetWidth || 1;
    var scaleY = c.height/c.offsetHeight || 1;

    if (!isNaN(e.offsetX))
      return { x:e.offsetX*scaleX, y:e.offsetY*scaleY };

    var x=e.pageX, y=e.pageY;
    do {
      x -= el.offsetLeft;
      y -= el.offsetTop;
      el = el.offsetParent;
    } while (el);
    return { x: x*scaleX, y: y*scaleY };
  }
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Manage (X,Y) Draw Line</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
  drawLine: function(){
    var lineArr = this.get('steps');

    var cvas = this.get('canvas');
    var ctx = cvas.getContext("2d");
    ctx.beginPath();
    for(var i=0; i&lt;lineArr.length; i++){
      var point = lineArr[i];
      ctx.lineTo(point.x,point.y);
    }
    ctx.stroke();
  }
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Manage (X,Y) Demo</h2>
      <h3></h3>
    </hgroup>
    <article ><p>http://emberjs.jsbin.com/gohix/1/edit</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Animate Sunglasses</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Load image in to DOM</li>
<li>Copy in to canvas</li>
<li>Track the mouse</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Load image in to the DOM</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="html">
  &lt;img id=&quot;sunglasses&quot;
          src=&quot;https://s3-us-west-1.amazonaws.com/xrl/talks/sdjs-deal-with-it/sunglasses.png&quot;
          style=&quot;display: none&quot;/&gt;
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Copy in to canvas</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
var img = $("img#sunglasses");
var canvas = $("canvas#deal-with-it");
var ctx = canvas.getContext("2d");

ctx.drawImage(img,
              point.x, point.y,
              img.width*scale,
              img.height*scale);
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Track the mouse</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
mouseMove: function(event,view){
  if(this.get('isMouseDown')){
    var point = this.relMouseCoords(event,this.get('canvas'));
    this.get('steps').pushObject(point);
    this.drawGlasses(point);
  }
},
drawGlasses: function(point){
  var img = this.get('sunglasses'), scale = this.get('sunglassesScale');
  var cvas = this.get('canvas');
  var ctx = cvas.getContext("2d");

  ctx.drawImage(this.get('sunglasses'),point.x,point.y,img.width*scale,img.height*scale);
}
</pre>

<ul>
<li>http://emberjs.jsbin.com/cayix/1/edit</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Uh, not what we wanted</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Additive</li>
<li>Clear the canvas with clearRect!</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Track the mouse (now with clearing)</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
mouseMove: function(event,view){
  if(this.get('isMouseDown')){
    var point = this.relMouseCoords(event,this.get('canvas'));
    this.get('steps').pushObject(point);
    this.drawGlasses(point);
  }
},
drawGlasses: function(point){
  var img = this.get('sunglasses'), scale = this.get('sunglassesScale');
  var cvas = this.get('canvas');
  var ctx = cvas.getContext("2d");

  context.clearRect(0, 0, cvas.width, cvas.height);
  ctx.drawImage(this.get('sunglasses'),point.x,point.y,img.width*scale,img.height*scale);
}
</pre>

<p>http://emberjs.jsbin.com/cayix/4/edit</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Draw the background</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Replaces ctx.clearRect()</li>
<li>Load up an image from the DOM... of me!</li>
<li>Don't mind the EmberJS'ism</li>
</ul>
<pre class="prettyprint" data-lang="html">
  &lt;img id=&quot;sunglasses&quot;
          src=&quot;https://s3-us-west-1.amazonaws.com/xrl/talks/sdjs-deal-with-it/xavier-deuces.png&quot;
          style=&quot;display: none&quot;/&gt;
</pre>

<pre class="prettyprint" data-lang="javascript">
  drawBackground: function(){
    var cvas = this.get('canvas');
    var ctx = cvas.getContext("2d");

    ctx.drawImage(this.get('background'),0,0);
  }.on('didInsertElement')
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Layer the canvas</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
  if(this.get('isMouseDown')){
    this.drawBackground();

    var point = this.relMouseCoords(event,this.get('canvas'));
    this.get('steps').pushObject(point);
    this.drawLine();
    this.drawGlasses(point);
  }
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Playback</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
  frameTimers: [],
  animationSpeed: 30,
  startAnimation: function(){
    this.drawBackground();
    var steps = this.get('steps'), frame=0;
    var self = this;

    for(var i=0; i &lt; steps.length; i=i+1){
      var timer = window.setTimeout(function(){
        var point = steps[frame];
        self.drawBackground();
        self.drawLine();
        self.drawGlasses(point);
        frame = frame + 1;
      }, self.get('animationSpeed')*i);

      self.get('frameTimers').pushObject(timer);
    }
  }
</pre>

<p>http://emberjs.jsbin.com/guhit/3/edit</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Canceling Playback</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
  cancelAnimation: function(){
    this.get('frameTimers').forEach(window.clearTimeout);
    this.set('frameTimers',[]);
    this.drawBackground();
  }
</pre>

<p>http://emberjs.jsbin.com/guhit/3/edit</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Drawing Text</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
  displayText: "Deal With It",
  font: "40pt Arial",
  setFont: function(font){
    var cvas = this.get('canvas');
    var ctx  = cvas.getContext('2d');
    ctx.font = font;
  },
  drawText: function(){
    var text = self.get('displayText');
    self.setFont(self.get('font'));
    self.drawText(text,400,50);

    var cvas = this.get('canvas');
    var ctx  = cvas.getContext('2d');

    ctx.strokeText.apply(ctx,arguments);
  }
</pre>

<p>http://emberjs.jsbin.com/gujon/73/edit</p></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Exporting GIF</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>https://github.com/jnordberg/gif.js</li>
</ul>
<pre class="prettyprint" data-lang="javascript">
  var gif = new GIF({
    workers: 2,
    quality: 10
  });

  // or a canvas element
  gif.addFrame(canvasElement, {delay: 200});

  // or copy the pixels from a canvas context
  gif.addFrame(ctx, {copy: true});

  gif.on('finished', function(blob) {
    window.open(URL.createObjectURL(blob));
  });

  gif.render();
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Replaying animation in to gif.js</h2>
      <h3></h3>
    </hgroup>
    <article ><pre class="prettyprint" data-lang="javascript">
  generateGIF: function(){
    var gif = new GIF({quality: 10}),
        steps = this.get('steps'),
        canvas = this.get('canvas');
    for(var i=0; i &lt; steps.length; i=i+1){
      var point = steps[i];
      this.drawBackground();
      this.drawLine();
      this.drawGlasses(point);
      gif.addFrame(canvas, {delay: this.get('animationSpeed'),
                            copy: true});
    }

    var self=this;
    gif.on('finished',function(blob){
      window.open(URL.createObjectURL(blob));
    });
    gif.render();
  }
</pre></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Canvas serializations fails...</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Need to work around security problems</li>
<li>Host all assets on same domain and from web</li>
</ul></article>
 
</slide>

<slide  >
  
    <hgroup>
      <h2>Final version</h2>
      <h3></h3>
    </hgroup>
    <article ><ul>
<li>Bells and whistles from EmberJS</li>
<li>get/set are the weirdest</li>
<li>otherwise ignore</li>
</ul>
<p>http://emberjs.jsbin.com/gujon/73/edit</p></article>
 
</slide>


<slide class="thank-you-slide segue nobackground">
  <aside class="gdbar right"><img src="images/html5_canvas_logo_by_netgoblin154-d54alet.png"></aside>
  <article class="flexbox vleft auto-fadein">
    <h2>&lt;Thank You!&gt;</h2>
    <p>Xavier Lange: xrlange@gmail.com</p>
  </article>
  <p class="auto-fadein" data-config-contact>
    <!-- populated from slide_config.json -->
  </p>
</slide>

<!-- <slide class="logoslide dark nobackground">
  <article class="flexbox vcenter">
    <span><img src="images/google_developers_logo_white.png"></span>
  </article>
</slide> -->

<slide class="backdrop"></slide>

</slides>

<script>
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<!--[if IE]>
  <script src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js"></script>
  <script>CFInstall.check({mode: 'overlay'});</script>
<![endif]-->
</body>
</html>